(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{11:function(e,t,n){e.exports={wrapper:"styles_wrapper__2-jsp",logo:"styles_logo__3QR2w",logoBg:"styles_logoBg__1GusQ",logoBg2:"styles_logoBg2__gEMSm",text:"styles_text__1QeJP",menu:"styles_menu__2EFKb",link:"styles_link__2-6Hr"}},13:function(e,t,n){e.exports={wrapper:"styles_wrapper__Q-bVg",data:"styles_data__2FedQ",picture:"styles_picture__oiIoW",actions:"styles_actions__2X8PI"}},14:function(e,t,n){e.exports={tag:"styles_tag__3z7U5",owned:"styles_owned__3foTe styles_tag__3z7U5",available:"styles_available__2Tp2T styles_tag__3z7U5",unavailable:"styles_unavailable__OoUC8 styles_tag__3z7U5"}},22:function(e,t,n){e.exports={wrapper:"styles_wrapper__14IG6",content:"styles_content__8i8OO"}},23:function(e,t,n){e.exports={wrapper:"styles_wrapper__FVQMb",isPrimary:"styles_isPrimary__2ZGYi"}},30:function(e,t,n){e.exports={wrapper:"styles_wrapper__dnxY3"}},31:function(e,t,n){e.exports={wrapper:"styles_wrapper__2-agE"}},58:function(e,t){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var s=n(1),i=n.n(s),r=n(27),c=n.n(r),a=n(7),o=n(2),l=n(11),d=n.n(l),u=n(0),j=function(){return Object(u.jsx)("div",{className:d.a.wrapper,children:Object(u.jsxs)(a.b,{className:d.a.logo,to:"/",children:[Object(u.jsx)("div",{className:d.a.logoBg}),Object(u.jsx)("div",{className:d.a.logoBg2}),Object(u.jsx)("div",{className:d.a.text,children:"Rent-o-mati!"})]})})},b=n(10),_=n(29).agent();function v(e,t,n){var s=((null===n||void 0===n?void 0:n.method)||(t?"POST":"GET")).toLowerCase();return(t?_[s](e).send(t):_[s](e)).then((function(e){return null===e||void 0===e?void 0:e.body})).catch((function(e){throw new Error(e)}))}function m(e){return v("reservations/userId/".concat(e))}_.use((function(e){e.url="http://34.89.235.4/api/".concat(e.url)}));var O,h=n(30),p=n.n(h),x=function(e){var t=e.itemId,n=e.size,s=void 0===n?100:n;return Object(u.jsx)("div",{className:p.a.wrapper,style:{width:s,height:s},children:Object(u.jsx)("img",{src:"".concat("","/item-").concat(t,".jpg")})})};!function(e){e.AVAILABLE="AVAILABLE",e.UNAVAILABLE="UNAVAILABLE"}(O||(O={}));var f=n(14),y=n.n(f),w=function(e){var t=e.status;return 1===e.userId?Object(u.jsx)("div",{className:y.a.owned,children:"Currently owned"}):t===O.AVAILABLE?Object(u.jsx)("div",{className:y.a.available,children:"Available"}):Object(u.jsx)("div",{className:y.a.unavailable,children:"Unavailable"})},g=function(e){var t=e.dateString;if(!t)return null;var n=new Date(t);return Object(u.jsx)("span",{children:n.toLocaleDateString(void 0)})},N=n(9),I=n.n(N),B=function(e){var t,n,s=e.item,i=e.showStatus,r=void 0===i||i,c=e.currentReservation;return Object(u.jsxs)("div",{className:I.a.wrapper,children:[Object(u.jsx)("div",{className:I.a.title,children:s.name}),r&&Object(u.jsx)("div",{className:I.a.row,children:Object(u.jsx)(w,{status:s.status,userId:null===(t=s.rentedBy)||void 0===t?void 0:t.id})}),s.rentedBy&&1!==s.rentedBy.id&&Object(u.jsxs)("div",{className:I.a.row,children:[Object(u.jsx)("div",{className:I.a.label,children:"rented by:"}),null===(n=s.rentedBy)||void 0===n?void 0:n.name]}),c&&Object(u.jsxs)("div",{className:I.a.row,children:[Object(u.jsx)(g,{dateString:c.startDate})," \xa0-\xa0 ",Object(u.jsx)(g,{dateString:c.endDate})]})]})},A=n(22),S=n.n(A),L=function(e){var t=e.item,n=e.showStatus;return Object(u.jsxs)(a.b,{to:"/items/".concat(t.id),className:S.a.wrapper,children:[Object(u.jsx)(x,{itemId:t.id}),Object(u.jsx)("div",{className:S.a.content,children:Object(u.jsx)(B,{item:t,showStatus:n})})]})},E=n(31),k=n.n(E),P=function(){var e=Object(s.useState)([]),t=Object(b.a)(e,2),n=t[0],i=t[1],r=Object(s.useState)([]),c=Object(b.a)(r,2),a=c[0],o=c[1];Object(s.useEffect)((function(){v("items").then((function(e){i(e)})),m(1).then((function(e){o(e)}))}),[]);var l=n.filter((function(e){return a.some((function(t){return t.itemId===e.id}))})),d=n.filter((function(e){return!a.some((function(t){return t.itemId===e.id}))}));return Object(u.jsxs)("div",{className:k.a.wrapper,children:[l.length&&Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"my items:"}),l.map((function(e){return Object(u.jsx)(L,{item:e},e.id)}))]}),d.length&&Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"other items:"}),d.map((function(e){return Object(u.jsx)(L,{item:e},e.id)}))]})]})},C=n(32),U=n(33),V=n(23),T=n.n(V),z=function(e){var t=e.onClick,n=void 0===t?function(){}:t,s=e.isPrimary,i=e.children;return Object(u.jsx)("div",{className:Object(U.a)(T.a.wrapper,Object(C.a)({},T.a.isPrimary,s)),onClick:function(){return n()},children:i})},Q=n(13),D=n.n(Q),G=function(){var e,t=Object(s.useState)(),n=Object(b.a)(t,2),i=n[0],r=n[1],c=Object(s.useState)([]),a=Object(b.a)(c,2),l=a[0],d=a[1],j=Object(o.h)(),_=Object(o.g)(),h=1===(null===i||void 0===i||null===(e=i.rentedBy)||void 0===e?void 0:e.id),p=l.find((function(e){return e.itemId===(null===i||void 0===i?void 0:i.id)}));function f(){var e;(e=j.itemId,v("item/".concat(e))).then((function(e){r(e)})),m(1).then((function(e){d(e)}))}function y(){var e,t;(null===i||void 0===i?void 0:i.id)&&(e=1,t=null===i||void 0===i?void 0:i.id,v("reservations/reserve",{userId:e,itemId:t},{method:"POST"})).then((function(){f()}))}function w(){var e;(null===i||void 0===i?void 0:i.id)&&(e=null===i||void 0===i?void 0:i.id,v("reservations/cancel",{itemId:e},{method:"POST"})).then((function(){f()}))}return Object(s.useEffect)((function(){f()}),[]),i?Object(u.jsxs)("div",{className:D.a.wrapper,children:[Object(u.jsxs)("div",{className:D.a.data,children:[Object(u.jsx)("div",{className:D.a.picture,children:Object(u.jsx)(x,{itemId:i.id,size:150})}),Object(u.jsx)(B,{item:i,currentReservation:p})]}),Object(u.jsxs)("div",{className:D.a.actions,children:[Object(u.jsx)(z,{onClick:function(){return _.goBack()},children:"Go back"}),i.status===O.AVAILABLE&&Object(u.jsx)(z,{isPrimary:!0,onClick:function(){return y()},children:"Book"}),h&&Object(u.jsx)(z,{isPrimary:!0,onClick:function(){return w()},children:"Mark as returned"})]})]}):null};n(64),n(65);c.a.render(Object(u.jsx)(i.a.StrictMode,{children:Object(u.jsxs)(a.a,{children:[Object(u.jsx)(j,{}),Object(u.jsxs)(o.d,{children:[Object(u.jsx)(o.b,{exact:!0,path:"/",children:Object(u.jsx)(o.a,{to:"/items"})}),Object(u.jsx)(o.b,{path:"/items/:itemId",children:Object(u.jsx)(G,{})}),Object(u.jsx)(o.b,{path:"/items",children:Object(u.jsx)(P,{})})]})]})}),document.getElementById("root"))},9:function(e,t,n){e.exports={wrapper:"styles_wrapper__3WD1L",title:"styles_title__1WPec",row:"styles_row__2h6hH",label:"styles_label__3FaYm"}}},[[66,1,2]]]);
//# sourceMappingURL=main.44489b2d.chunk.js.map